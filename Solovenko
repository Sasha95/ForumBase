/*CREATE OR REPLACE FUNCTION all_comments(post_id int) RETURNS SETOF RECORD AS
$$
BEGIN
	RETURN */
		WITH RECURSIVE included_comments(post_holder_id, id) AS (
		  SELECT post_holder_id, id FROM post WHERE post_holder_id BETWEEN 1 AND 200
		UNION ALL
		    SELECT
			post.post_holder_id,
			post.id
		    FROM included_comments, post 
		    WHERE included_comments.id=post.post_holder_id
		  )
		SELECT count(id) FROM included_comments limit 1000
/*END;
$$ 
LANGUAGE plpgsql; 

SELECT all_comments(5)*/
